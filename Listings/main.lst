C51 COMPILER V9.60.0.0   MAIN                                                              12/26/2020 13:26:06 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\ABDULLAH\BFE\Embedded system\programms\programsFiles\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BR
                    -OWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <reg52.h>
   2          #include "Ports.h"
   3          #include "Interrupt.h"
   4          #include "Delay.h"
   5          #include "DataTypes.h"
   6          
   7          
   8          //#define TIMER_COUNTER 1
   9          #define RED_DELAY 8
  10          #define YELLOW_DELAY 3
  11          #define GREEN_DELAY 12
  12          
  13          
  14          states curState=red;
  15          tWord ticks=0;
  16          tWord i;
  17          
  18          void initialization();
  19          void operation();
  20          void GOTO_SLEEP();
  21          void task();
  22          
  23          void main(void){
  24   1        initialization();
  25   1        operation();
  26   1      }
  27          
  28          /* The function to save power of the uProcessor during the periods of interrupt */
  29          void GOTO_SLEEP(){
  30   1        PCON |=1; // power down mode
  31   1      }
  32          
  33          /* The function used to initialize variables as input and output and also to initialize the timer */
  34          void initialization(){
  35   1      
  36   1        redPin=0;
  37   1        yellowPin=0;
  38   1        greenPin=0;
  39   1        delay_50ms_Timer();
  40   1        
  41   1      }
  42          
  43          
  44          // ISR TIMER 2
  45          void InterruptTimer2_ISR() interrupt InterruptTimer2{
  46   1        TF2 = 0;
  47   1        task();
  48   1      }
  49             
  50          void task(){
  51   1          switch(curState){
  52   2            case red:
  53   2              redPin=1;
  54   2              Delay_s(RED_DELAY);
C51 COMPILER V9.60.0.0   MAIN                                                              12/26/2020 13:26:06 PAGE 2   

  55   2                curState=yellow;
  56   2                redPin=0;
  57   2                yellowPin=1;
  58   2                greenPin=0;
  59   2                ticks=0;
  60   2              break;
  61   2            case yellow:
  62   2              yellowPin=1;
  63   2              Delay_s(YELLOW_DELAY);
  64   2                curState=green;
  65   2                redPin=0;
  66   2                yellowPin=0;
  67   2                greenPin=1;
  68   2                ticks=0;
  69   2              break;
  70   2              case green:
  71   2                greenPin=1;
  72   2                Delay_s(GREEN_DELAY);
  73   2                  curState=red;
  74   2                  redPin=1;
  75   2                  yellowPin=0;
  76   2                  greenPin=0;
  77   2                  ticks=0;
  78   2              break;
  79   2            default:
  80   2              redPin=0;
  81   2              yellowPin=0;
  82   2              greenPin=0;
  83   2          }
  84   1      }
  85          
  86          void operation(){
  87   1        while(1)
  88   1          GOTO_SLEEP();
  89   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    168    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
